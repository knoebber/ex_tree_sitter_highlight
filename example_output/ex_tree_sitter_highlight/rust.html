  <!DOCTYPE html>
  <style>
  html {
     font-size: 13px;
  }
  html, body, pre {
     margin: 0;
  }
  pre {
     width: fit-content;
  }
  :root {
    --code-block-background-color: #f5f5f5;
    --code-default-color: black;
    --token-attribute-color: rgb(91, 121, 227);
    --token-builtin-color: rgb(102, 159, 89);
    --token-comment-color: rgb(165, 166, 170);
    --token-constant-color: rgb(121, 161, 103);
    --token-function-color: rgb(91, 121, 227);
    --token-keyword-color: rgb(164, 73, 171);
    --token-module-color: rgb(56, 130, 183);
    --token-number-color: rgb(173, 110, 37);
    --token-operator-color: rgb(91, 121, 227);
    --token-property-color: rgb(73, 110, 38);
    --token-special-string-color: rgb(173, 110, 38);
    --token-string-color: rgb(100, 159, 88);
    --token-tag-color: rgb(164, 73, 171);
    --token-builtin-variable-color: rgb(173, 110, 37);
}
.code-block code {
    font-family:
        Roboto Mono,
        monospace;
    display: grid;
    line-height: 1.5;
    color: var(--code-default-color);
    background-color: var(--code-block-background-color);
}

.line-number {
    user-select: none;
    text-align: right;
    color: rgba(27, 31, 35, 0.3);
    padding: 0 10px;
}

.token.attribute {
    color: var(--token-attribute-color);
}
.token.builtin {
    color: var(--token-builtin-color);
}
.token.constant {
    color: var(--token-constant-color);
}
.token.comment {
    color: var(--token-comment-color);
}
.token.function {
    color: var(--token-function-color);
}
.token.keyword {
    color: var(--token-keyword-color);
}
.token.module {
    color: var(--token-module-color);
}
.token.number {
    color: var(--token-number-color);
}
.token.operator {
    color: var(--token-operator-color);
}
.token.property {
    color: var(--token-property-color);
}
.token.string {
    color: var(--token-string-color);
}
.token.string.special {
    color: var(--token-special-string-color);
}
.token.tag {
    color: var(--token-tag-color);
}
.token.variable.builtin {
    color: var(--token-builtin-variable-color);
}

  </style>
  <html>
  <body>
  <pre class="code-block language-rust"><code>
<div class="line-wrapper"><span class="line-number">1</span><span class="token keyword">use</span> once_cell<span class="token punctuation delimiter">::</span>sync<span class="token punctuation delimiter">::</span><span class="token constructor">Lazy</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">2</span><span class="token keyword">use</span> rustler<span class="token punctuation delimiter">::</span>env<span class="token punctuation delimiter">::</span><span class="token constructor">Env</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">3</span><span class="token keyword">use</span> rustler<span class="token punctuation delimiter">::</span><span class="token punctuation bracket">{</span><span class="token constructor">Atom</span><span class="token punctuation delimiter">,</span> <span class="token constructor">Error</span> <span class="token keyword">as</span> <span class="token constructor">NifError</span><span class="token punctuation delimiter">,</span> <span class="token constructor">NifResult</span><span class="token punctuation delimiter">,</span> <span class="token constructor">Term</span> <span class="token keyword">as</span> <span class="token constructor">NifTerm</span><span class="token punctuation bracket">}</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">4</span><span class="token keyword">use</span> std<span class="token punctuation delimiter">::</span>fmt<span class="token punctuation delimiter">::</span><span class="token constructor">Write</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">5</span><span class="token keyword">use</span> tree_sitter_highlight<span class="token punctuation delimiter">::</span><span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">6</span>    <span class="token constructor">Error</span> <span class="token keyword">as</span> <span class="token constructor">HighlightError</span><span class="token punctuation delimiter">,</span> <span class="token constructor">HighlightConfiguration</span><span class="token punctuation delimiter">,</span> <span class="token constructor">Highlighter</span><span class="token punctuation delimiter">,</span> <span class="token constructor">HtmlRenderer</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">7</span><span class="token punctuation bracket">}</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">8</span>
</div>
<div class="line-wrapper"><span class="line-number">9</span><span class="token keyword">mod</span> atoms <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">10</span>    rustler<span class="token punctuation delimiter">::</span>atoms! <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">11</span>       highlight_cancelled<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">12</span>       highlight_invalid_language<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">13</span>       highlight_unknown<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">14</span>       nil<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">15</span>       ok<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">16</span>       unsupported_language<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">17</span>    <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">18</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">19</span>
</div>
<div class="line-wrapper"><span class="line-number">20</span><span class="token keyword">const</span> <span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation delimiter">:</span> <span class="token punctuation bracket">[</span><span class="token operator">&amp;</span><span class="token type builtin">str</span><span class="token punctuation delimiter">;</span> <span class="token constant builtin">22</span><span class="token punctuation bracket">]</span> = <span class="token punctuation bracket">[</span>
</div>
<div class="line-wrapper"><span class="line-number">21</span>    <span class="token string">&quot;attribute&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">22</span>    <span class="token string">&quot;comment&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">23</span>    <span class="token string">&quot;constant&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">24</span>    <span class="token string">&quot;constant.builtin&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">25</span>    <span class="token string">&quot;constructor&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">26</span>    <span class="token string">&quot;embedded&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">27</span>    <span class="token string">&quot;function&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">28</span>    <span class="token string">&quot;function.builtin&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">29</span>    <span class="token string">&quot;keyword&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">30</span>    <span class="token string">&quot;module&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">31</span>    <span class="token string">&quot;number&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">32</span>    <span class="token string">&quot;operator&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">33</span>    <span class="token string">&quot;property&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">34</span>    <span class="token string">&quot;punctuation.bracket&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">35</span>    <span class="token string">&quot;punctuation.delimiter&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">36</span>    <span class="token string">&quot;string&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">37</span>    <span class="token string">&quot;string.special&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">38</span>    <span class="token string">&quot;tag&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">39</span>    <span class="token string">&quot;type&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">40</span>    <span class="token string">&quot;type.builtin&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">41</span>    <span class="token string">&quot;variable.builtin&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">42</span>    <span class="token string">&quot;variable.parameter&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">43</span><span class="token punctuation bracket">]</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">44</span>
</div>
<div class="line-wrapper"><span class="line-number">45</span><span class="token keyword">static</span> <span class="token constructor">C_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">46</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">47</span>        tree_sitter_c<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">48</span>        tree_sitter_c<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHT_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">49</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">50</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">51</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">52</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">53</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">54</span>    c
</div>
<div class="line-wrapper"><span class="line-number">55</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">56</span><span class="token keyword">static</span> <span class="token constructor">CSS_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">57</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">58</span>        tree_sitter_css<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">59</span>        tree_sitter_css<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHTS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">60</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">61</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">62</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">63</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">64</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">65</span>    c
</div>
<div class="line-wrapper"><span class="line-number">66</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">67</span>
</div>
<div class="line-wrapper"><span class="line-number">68</span><span class="token keyword">static</span> <span class="token constructor">ELIXIR_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">69</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">70</span>        tree_sitter_elixir<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">71</span>        tree_sitter_elixir<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHTS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">72</span>        <span class="token string">r#&quot;((sigil</span>
</div>
<div class="line-wrapper"><span class="line-number">73</span><span class="token string">            (sigil_name) @_sigil_name</span>
</div>
<div class="line-wrapper"><span class="line-number">74</span><span class="token string">            (quoted_content) @injection.content)</span>
</div>
<div class="line-wrapper"><span class="line-number">75</span><span class="token string">            (#eq? @_sigil_name &quot;H&quot;)</span>
</div>
<div class="line-wrapper"><span class="line-number">76</span><span class="token string">            (#set! injection.language &quot;heex&quot;)</span>
</div>
<div class="line-wrapper"><span class="line-number">77</span><span class="token string">            (#set! injection.combined))&quot;#</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">78</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">79</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">80</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">81</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">82</span>    <span class="token function">println</span><span class="token function">!</span><span class="token punctuation bracket">(</span><span class="token string">&quot;configured elixir&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">83</span>    c
</div>
<div class="line-wrapper"><span class="line-number">84</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">85</span>
</div>
<div class="line-wrapper"><span class="line-number">86</span><span class="token keyword">static</span> <span class="token constructor">GO_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">87</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">88</span>        tree_sitter_go<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">89</span>        tree_sitter_go<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHT_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">90</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">91</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">92</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">93</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">94</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">95</span>    c
</div>
<div class="line-wrapper"><span class="line-number">96</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">97</span>
</div>
<div class="line-wrapper"><span class="line-number">98</span><span class="token keyword">static</span> <span class="token constructor">HASKELL_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">99</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">100</span>        tree_sitter_haskell<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">101</span>        tree_sitter_haskell<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHTS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">102</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">103</span>        tree_sitter_haskell<span class="token punctuation delimiter">::</span><span class="token constructor">LOCALS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">104</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">105</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">106</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">107</span>    c
</div>
<div class="line-wrapper"><span class="line-number">108</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">109</span>
</div>
<div class="line-wrapper"><span class="line-number">110</span><span class="token keyword">static</span> <span class="token constructor">HEEX_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">111</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">112</span>        tree_sitter_heex<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">113</span>        tree_sitter_heex<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHTS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">114</span>        tree_sitter_heex<span class="token punctuation delimiter">::</span><span class="token constructor">INJECTIONS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">115</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">116</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">117</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">118</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">119</span>    c
</div>
<div class="line-wrapper"><span class="line-number">120</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">121</span>
</div>
<div class="line-wrapper"><span class="line-number">122</span><span class="token keyword">static</span> <span class="token constructor">HTML_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">123</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">124</span>        tree_sitter_html<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">125</span>        tree_sitter_html<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHTS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">126</span>        tree_sitter_html<span class="token punctuation delimiter">::</span><span class="token constructor">INJECTIONS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">127</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">128</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">129</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">130</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">131</span>    c
</div>
<div class="line-wrapper"><span class="line-number">132</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">133</span>
</div>
<div class="line-wrapper"><span class="line-number">134</span><span class="token keyword">static</span> <span class="token constructor">JS_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">135</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">136</span>        tree_sitter_javascript<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">137</span>        tree_sitter_javascript<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHT_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">138</span>        tree_sitter_javascript<span class="token punctuation delimiter">::</span><span class="token constructor">INJECTION_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">139</span>        tree_sitter_javascript<span class="token punctuation delimiter">::</span><span class="token constructor">LOCALS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">140</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">141</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">142</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">143</span>    c
</div>
<div class="line-wrapper"><span class="line-number">144</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">145</span>
</div>
<div class="line-wrapper"><span class="line-number">146</span><span class="token keyword">static</span> <span class="token constructor">JSON_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">147</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">148</span>        tree_sitter_json<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">149</span>        tree_sitter_json<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHT_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">150</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">151</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">152</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">153</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">154</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">155</span>    c
</div>
<div class="line-wrapper"><span class="line-number">156</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">157</span>
</div>
<div class="line-wrapper"><span class="line-number">158</span><span class="token keyword">static</span> <span class="token constructor">RUST_CONFIG</span><span class="token punctuation delimiter">:</span> <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span> = <span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>|| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">159</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> c = <span class="token type">HighlightConfiguration</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">160</span>        tree_sitter_rust<span class="token punctuation delimiter">::</span><span class="token function">language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">161</span>        tree_sitter_rust<span class="token punctuation delimiter">::</span><span class="token constructor">HIGHLIGHT_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">162</span>        tree_sitter_rust<span class="token punctuation delimiter">::</span><span class="token constructor">INJECTIONS_QUERY</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">163</span>        <span class="token string">&quot;&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">164</span>    <span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">165</span>    <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">166</span>    c<span class="token punctuation delimiter">.</span><span class="token function">configure</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">167</span>    c
</div>
<div class="line-wrapper"><span class="line-number">168</span><span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">169</span>
</div>
<div class="line-wrapper"><span class="line-number">170</span><span class="token keyword">fn</span> <span class="token function">translate_highlight_error</span><span class="token punctuation bracket">(</span><span class="token variable parameter">e</span><span class="token punctuation delimiter">:</span> <span class="token type">HighlightError</span><span class="token punctuation bracket">)</span> -&gt; <span class="token type">NifError</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">171</span>    <span class="token type">NifError</span><span class="token punctuation delimiter">::</span><span class="token constructor">Term</span><span class="token punctuation bracket">(</span><span class="token type">Box</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span><span class="token keyword">match</span> e <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">172</span>        <span class="token type">HighlightError</span><span class="token punctuation delimiter">::</span><span class="token constructor">Cancelled</span> =&gt; atoms<span class="token punctuation delimiter">::</span><span class="token function">highlight_cancelled</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">173</span>        <span class="token type">HighlightError</span><span class="token punctuation delimiter">::</span><span class="token constructor">InvalidLanguage</span> =&gt; atoms<span class="token punctuation delimiter">::</span><span class="token function">highlight_invalid_language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">174</span>        <span class="token type">HighlightError</span><span class="token punctuation delimiter">::</span><span class="token constructor">Unknown</span> =&gt; atoms<span class="token punctuation delimiter">::</span><span class="token function">highlight_unknown</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">175</span>    <span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">176</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">177</span>
</div>
<div class="line-wrapper"><span class="line-number">178</span><span class="token keyword">fn</span> <span class="token function">get_lang_tuples</span><span class="token punctuation bracket">&lt;</span><span class="token operator">&#39;</span>a<span class="token punctuation bracket">&gt;</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span> -&gt; <span class="token type">Vec</span><span class="token punctuation bracket">&lt;</span><span class="token punctuation bracket">(</span><span class="token operator">&amp;</span><span class="token operator">&#39;</span>a <span class="token type builtin">str</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token operator">&#39;</span>a <span class="token type">Lazy</span><span class="token punctuation bracket">&lt;</span><span class="token type">HighlightConfiguration</span><span class="token punctuation bracket">&gt;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token operator">&#39;</span>a <span class="token type builtin">str</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">&gt;</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">179</span>    <span class="token function">vec</span><span class="token function">!</span><span class="token punctuation bracket">[</span>
</div>
<div class="line-wrapper"><span class="line-number">180</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">C_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.c .h&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">181</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;css&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">CSS_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.css&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">182</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;elixir&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">ELIXIR_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.ex .exs&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">183</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;go&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">GO_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.go&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">184</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;haskell&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">HASKELL_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.hs&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">185</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;heex&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">HEEX_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.heex&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">186</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;html&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">HTML_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">187</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;javascript&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">JS_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.js .mjs&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">188</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;json&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">JSON_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.json&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">189</span>        <span class="token punctuation bracket">(</span><span class="token string">&quot;rust&quot;</span><span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span><span class="token constructor">RUST_CONFIG</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot;.rs&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">190</span>    <span class="token punctuation bracket">]</span><span class="token punctuation delimiter"></span>
</div>
<div class="line-wrapper"><span class="line-number">191</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">192</span>
</div>
<div class="line-wrapper"><span class="line-number">193</span><span class="token attribute">#<span class="token punctuation bracket">[</span>rustler<span class="token punctuation delimiter">::</span>nif<span class="token punctuation bracket">]</span></span>
</div>
<div class="line-wrapper"><span class="line-number">194</span><span class="token keyword">fn</span> <span class="token function">get_language_from_filename</span><span class="token punctuation bracket">(</span><span class="token variable parameter">env</span><span class="token punctuation delimiter">:</span> <span class="token type">Env</span><span class="token punctuation delimiter">,</span> <span class="token variable parameter">filename</span><span class="token punctuation delimiter">:</span> <span class="token operator">&amp;</span><span class="token type builtin">str</span><span class="token punctuation bracket">)</span> -&gt; <span class="token type">Atom</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">195</span>    <span class="token keyword">for</span> <span class="token punctuation bracket">(</span>lang<span class="token punctuation delimiter">,</span> _<span class="token punctuation delimiter">,</span> extensions<span class="token punctuation bracket">)</span> <span class="token keyword">in</span> <span class="token function">get_lang_tuples</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">196</span>        <span class="token keyword">let</span> parts = extensions<span class="token punctuation delimiter">.</span><span class="token function">split</span><span class="token punctuation bracket">(</span><span class="token string">&#39; &#39;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">197</span>        <span class="token keyword">for</span> p <span class="token keyword">in</span> parts <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">198</span>            <span class="token keyword">if</span> filename<span class="token punctuation delimiter">.</span><span class="token function">ends_with</span><span class="token punctuation bracket">(</span>p<span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">199</span>                <span class="token keyword">return</span> <span class="token type">Atom</span><span class="token punctuation delimiter">::</span><span class="token function">from_str</span><span class="token punctuation bracket">(</span>env<span class="token punctuation delimiter">,</span> lang<span class="token punctuation bracket">)</span><span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">200</span>            <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">201</span>        <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">202</span>    <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">203</span>    <span class="token keyword">return</span> atoms<span class="token punctuation delimiter">::</span><span class="token function">nil</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">204</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">205</span>
</div>
<div class="line-wrapper"><span class="line-number">206</span><span class="token attribute">#<span class="token punctuation bracket">[</span>rustler<span class="token punctuation delimiter">::</span>nif<span class="token punctuation bracket">]</span></span>
</div>
<div class="line-wrapper"><span class="line-number">207</span><span class="token keyword">fn</span> <span class="token function">get_supported_languages</span><span class="token punctuation bracket">(</span><span class="token variable parameter">env</span><span class="token punctuation delimiter">:</span> <span class="token type">Env</span><span class="token punctuation bracket">)</span> -&gt; <span class="token type">Vec</span><span class="token punctuation bracket">&lt;</span><span class="token type">Atom</span><span class="token punctuation bracket">&gt;</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">208</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> r = <span class="token type">Vec</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">209</span>    <span class="token keyword">for</span> <span class="token punctuation bracket">(</span>lang<span class="token punctuation delimiter">,</span> _<span class="token punctuation delimiter">,</span> _<span class="token punctuation bracket">)</span> <span class="token keyword">in</span> <span class="token function">get_lang_tuples</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">210</span>        r<span class="token punctuation delimiter">.</span><span class="token function">push</span><span class="token punctuation bracket">(</span><span class="token type">Atom</span><span class="token punctuation delimiter">::</span><span class="token function">from_str</span><span class="token punctuation bracket">(</span>env<span class="token punctuation delimiter">,</span> lang<span class="token punctuation bracket">)</span><span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">211</span>    <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">212</span>    r
</div>
<div class="line-wrapper"><span class="line-number">213</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">214</span>
</div>
<div class="line-wrapper"><span class="line-number">215</span><span class="token attribute">#<span class="token punctuation bracket">[</span>rustler<span class="token punctuation delimiter">::</span>nif<span class="token punctuation bracket">]</span></span>
</div>
<div class="line-wrapper"><span class="line-number">216</span><span class="token keyword">fn</span> <span class="token function">render_html</span><span class="token punctuation bracket">&lt;</span><span class="token operator">&#39;</span>a<span class="token punctuation bracket">&gt;</span><span class="token punctuation bracket">(</span><span class="token variable parameter">source_code</span><span class="token punctuation delimiter">:</span> <span class="token operator">&amp;</span><span class="token type builtin">str</span><span class="token punctuation delimiter">,</span> <span class="token variable parameter">l</span><span class="token punctuation delimiter">:</span> <span class="token type">NifTerm</span><span class="token punctuation bracket">)</span> -&gt; <span class="token type">NifResult</span><span class="token punctuation bracket">&lt;</span><span class="token punctuation bracket">(</span><span class="token type">Atom</span><span class="token punctuation delimiter">,</span> <span class="token type">String</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">&gt;</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">217</span>    <span class="token keyword">let</span> lang = l<span class="token punctuation delimiter">.</span><span class="token function">atom_to_string</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">218</span>
</div>
<div class="line-wrapper"><span class="line-number">219</span>    <span class="token keyword">let</span> get_config = |<span class="token variable parameter">given_lang</span><span class="token punctuation delimiter">:</span> <span class="token operator">&amp;</span><span class="token type builtin">str</span>| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">220</span>        <span class="token keyword">for</span> <span class="token punctuation bracket">(</span>lang<span class="token punctuation delimiter">,</span> config<span class="token punctuation delimiter">,</span> _<span class="token punctuation bracket">)</span> <span class="token keyword">in</span> <span class="token function">get_lang_tuples</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">221</span>            <span class="token keyword">if</span> lang == given_lang <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">222</span>                <span class="token keyword">return</span> <span class="token constructor">Some</span><span class="token punctuation bracket">(</span><span class="token type">Lazy</span><span class="token punctuation delimiter">::</span><span class="token function">force</span><span class="token punctuation bracket">(</span>config<span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">223</span>            <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">224</span>        <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">225</span>        <span class="token keyword">return</span> <span class="token constructor">None</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">226</span>    <span class="token punctuation bracket">}</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">227</span>
</div>
<div class="line-wrapper"><span class="line-number">228</span>    <span class="token keyword">let</span> highlight_config = <span class="token keyword">match</span> <span class="token function">get_config</span><span class="token punctuation bracket">(</span>lang<span class="token punctuation delimiter">.</span><span class="token function">as_str</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">229</span>        <span class="token constructor">Some</span><span class="token punctuation bracket">(</span>c<span class="token punctuation bracket">)</span> =&gt; c<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">230</span>        _ =&gt; <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">231</span>            <span class="token keyword">return</span> <span class="token constructor">Err</span><span class="token punctuation bracket">(</span><span class="token type">NifError</span><span class="token punctuation delimiter">::</span><span class="token constructor">Term</span><span class="token punctuation bracket">(</span><span class="token type">Box</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span>atoms<span class="token punctuation delimiter">::</span><span class="token function">unsupported_language</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">232</span>        <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">233</span>    <span class="token punctuation bracket">}</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">234</span>
</div>
<div class="line-wrapper"><span class="line-number">235</span>    <span class="token keyword">let</span> html_attrs = <span class="token constructor">HIGHLIGHT_NAMES</span><span class="token punctuation delimiter">.</span><span class="token function">map</span><span class="token punctuation bracket">(</span>|s| <span class="token function">format</span><span class="token function">!</span><span class="token punctuation bracket">(</span><span class="token string">r#&quot;class=&quot;token {}&quot;&quot;#</span><span class="token punctuation delimiter">,</span> s<span class="token punctuation delimiter">.</span><span class="token function">replace</span><span class="token punctuation bracket">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation delimiter">,</span> <span class="token string">&quot; &quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">236</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> highlighter = <span class="token type">Highlighter</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">237</span>
</div>
<div class="line-wrapper"><span class="line-number">238</span>    <span class="token keyword">let</span> source_code_bytes = source_code<span class="token punctuation delimiter">.</span><span class="token function">as_bytes</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">239</span>    <span class="token keyword">let</span> highlight_result =
</div>
<div class="line-wrapper"><span class="line-number">240</span>        highlighter<span class="token punctuation delimiter">.</span><span class="token function">highlight</span><span class="token punctuation bracket">(</span>highlight_config<span class="token punctuation delimiter">,</span> source_code_bytes<span class="token punctuation delimiter">,</span> <span class="token constructor">None</span><span class="token punctuation delimiter">,</span> get_config<span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">241</span>
</div>
<div class="line-wrapper"><span class="line-number">242</span>    <span class="token keyword">let</span> events = <span class="token keyword">match</span> highlight_result <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">243</span>        <span class="token constructor">Ok</span><span class="token punctuation bracket">(</span>events<span class="token punctuation bracket">)</span> =&gt; <span class="token constructor">Ok</span><span class="token punctuation bracket">(</span>events<span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">244</span>        <span class="token constructor">Err</span><span class="token punctuation bracket">(</span>e<span class="token punctuation bracket">)</span> =&gt; <span class="token constructor">Err</span><span class="token punctuation bracket">(</span><span class="token function">translate_highlight_error</span><span class="token punctuation bracket">(</span>e<span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">245</span>    <span class="token punctuation bracket">}</span>?<span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">246</span>
</div>
<div class="line-wrapper"><span class="line-number">247</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> renderer = <span class="token type">HtmlRenderer</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">248</span>
</div>
<div class="line-wrapper"><span class="line-number">249</span>    <span class="token keyword">match</span> renderer<span class="token punctuation delimiter">.</span><span class="token function">render</span><span class="token punctuation bracket">(</span>events<span class="token punctuation delimiter">,</span> source_code_bytes<span class="token punctuation delimiter">,</span> <span class="token operator">&amp;</span>|highlight| <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">250</span>        html_attrs<span class="token punctuation bracket">[</span>highlight<span class="token punctuation delimiter">.</span><span class="token constant builtin">0</span><span class="token punctuation bracket">]</span><span class="token punctuation delimiter">.</span><span class="token function">as_bytes</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">251</span>    <span class="token punctuation bracket">}</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">252</span>        <span class="token constructor">Ok</span><span class="token punctuation bracket">(</span>_<span class="token punctuation bracket">)</span> =&gt; <span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">253</span>        <span class="token constructor">Err</span><span class="token punctuation bracket">(</span>e<span class="token punctuation bracket">)</span> =&gt; <span class="token keyword">return</span> <span class="token constructor">Err</span><span class="token punctuation bracket">(</span><span class="token function">translate_highlight_error</span><span class="token punctuation bracket">(</span>e<span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">254</span>    <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">255</span>
</div>
<div class="line-wrapper"><span class="line-number">256</span>    <span class="token keyword">let</span> <span class="token keyword">mut</span> html = <span class="token type">String</span><span class="token punctuation delimiter">::</span><span class="token function">new</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">257</span>    <span class="token function">writeln</span><span class="token function">!</span><span class="token punctuation bracket">(</span>html<span class="token punctuation delimiter">,</span> <span class="token string">r#&quot;&lt;pre class=&quot;code-block language-{lang}&quot;&gt;&lt;code&gt;&quot;#</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span><span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">258</span>    <span class="token keyword">for</span> <span class="token punctuation bracket">(</span>i<span class="token punctuation delimiter">,</span> line<span class="token punctuation bracket">)</span> <span class="token keyword">in</span> renderer<span class="token punctuation delimiter">.</span><span class="token function">lines</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">.</span><span class="token function">enumerate</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span> <span class="token punctuation bracket">{</span>
</div>
<div class="line-wrapper"><span class="line-number">259</span>        <span class="token function">writeln</span><span class="token function">!</span><span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">260</span>            html<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">261</span>            <span class="token string">r#&quot;&lt;div class=&quot;line-wrapper&quot;&gt;&lt;span class=&quot;line-number&quot;&gt;{}&lt;/span&gt;{}&lt;/div&gt;&quot;#</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">262</span>            i + <span class="token constant builtin">1</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">263</span>            line<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">264</span>        <span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span>
</div>
<div class="line-wrapper"><span class="line-number">265</span>        <span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">266</span>    <span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">267</span>    <span class="token function">writeln</span><span class="token function">!</span><span class="token punctuation bracket">(</span>html<span class="token punctuation delimiter">,</span> <span class="token string">&quot;&lt;/code&gt;&lt;/pre&gt;&quot;</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span><span class="token punctuation delimiter">.</span><span class="token function">unwrap</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">;</span>
</div>
<div class="line-wrapper"><span class="line-number">268</span>
</div>
<div class="line-wrapper"><span class="line-number">269</span>    <span class="token constructor">Ok</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">(</span>atoms<span class="token punctuation delimiter">::</span><span class="token function">ok</span><span class="token punctuation bracket">(</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter">,</span> html<span class="token punctuation bracket">)</span><span class="token punctuation bracket">)</span>
</div>
<div class="line-wrapper"><span class="line-number">270</span><span class="token punctuation bracket">}</span>
</div>
<div class="line-wrapper"><span class="line-number">271</span>
</div>
<div class="line-wrapper"><span class="line-number">272</span>rustler<span class="token punctuation delimiter">::</span>init!<span class="token punctuation bracket">(</span>
</div>
<div class="line-wrapper"><span class="line-number">273</span>    <span class="token string">&quot;Elixir.TreeSitterHighlight&quot;</span><span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">274</span>    <span class="token punctuation bracket">[</span>
</div>
<div class="line-wrapper"><span class="line-number">275</span>        render_html<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">276</span>        get_supported_languages<span class="token punctuation delimiter">,</span>
</div>
<div class="line-wrapper"><span class="line-number">277</span>        get_language_from_filename
</div>
<div class="line-wrapper"><span class="line-number">278</span>    <span class="token punctuation bracket">]</span>
</div>
<div class="line-wrapper"><span class="line-number">279</span><span class="token punctuation bracket">)</span><span class="token punctuation delimiter"></span><span class="token punctuation delimiter">;</span>
</div>
</code></pre>

  </body>
  </html>
